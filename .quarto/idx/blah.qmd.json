{"title":"Royal Street Names in Brisbane City","markdown":{"yaml":{"title":"Royal Street Names in Brisbane City"},"headingText":"install.packages(\"sf\")","containsRefs":false,"markdown":"\n\nHave you ever noticed the prevelance of Royal street names within Australia?\n\nLiving in Brisbane CBD, it's certainly quite known that female Royal street names run in one direction and males the other.\n\nWe can quite easily observe the commonality of this accross brisbane ...\n\n\n<details><summary>Project setup</summary>\n```{r}\n#| warning: false\n#| output: false\n\n# install.packages(\"rmapshaper\")\n# install.packages(\"leaflet\")\n# install.packages(\"rgeos\")\n# install.packages(\"plotly\")\n\n# Restore our r environment.\nrenv::restore(prompt = F)\n\n# Load required packages.\nlibrary(sf)             # For reading Shape files.\nlibrary(rgeos)          # For reducing Shape files.\nlibrary(leaflet)        # Plotting Shape files.\nlibrary(data.table)     # For data.tables.\nlibrary(plotly)         # For plotsY.\n\n# Define a regex pattern of word-bounded Royal female and males names.\nroyal_female <- \"\\\\b(Adelaide|Cordelia|countess|Cordeilla|Ann|Queen|Victoria|Mary|Louise|Alexandra|Elizabeth|Alice|Margaret|Charlotte|Augusta|Helena|Maud|Agnes|Helene|Caroline|Olga|Louisa|Diana)\\\\b\"\nroyal_male <- \"\\\\b(Albert|George|Charles|Edward|earl|Christian|Frederick|Louis|Arthur|William|Henry|Alexander|John|Philip|Douglas|Ernest|Patrick|Friederike|Auguste|Francis|David|Augustus|Antony)\\\\b\"\n```\n</details>\n\n<details>\n\n```{r}\nif(F){\n    # Read the shapefile\n    shapefile <- st_read(\"C:\\\\temp\\\\QSC_Extracted_Data\\\\QSC_Extracted_Data_20240418_144922083000-53700\\\\Queensland_roads_and_tracks.shp\")\n\n\n    # We're only interested in Brisbane City and of the below road class types.\n    shapefile <- shapefile[\n        shapefile$LGA_NAME_R == \"Brisbane City\"\n    , ]\n    shapefile <- shapefile[shapefile$ROAD_NAME_ %ilike% royal_female | shapefile$ROAD_NAME_ %ilike% royal_male, ]\n\n    dt <- data.table(shapefile)\n\n    View(dt[, .N, ROAD_NAME_][order(-N)])\n\n\n    remove <- \"Saint Helena|Mary Ellen| HOLT |CHRISTIAN COL|M MAC|OUTREACH|E ANNE L|FARRIOR|WILLIAM FAR| LESLIE |TONGE|JOHN FRAN|JOHN FINN|SAINT GEOR|JOHN FISH| GOD |SAINT|BISHOP|JOHN BRI|ISLEY| ULM |ARTHUR GO|SIR DA|GASKIN|SIRETT|JOLLY|COOKMAN|E PAGE\"\n\n    shapefile <- shapefile[!shapefile$ROAD_NAME_ %ilike% remove, ]\n\n    dt <- data.table(shapefile)\n\n    View(dt[, .N, ROAD_NAME_][order(-N)])\n\n\n    st_write(shapefile, \"./inputs/queens_n_queens.shp\")\n\n    head(shapefile)\n    }\n```\n</details>\n\n```{r}\n#| warning: false\n#| output: false\n\n# Define the input path to our shapefile.\nshapefile <- st_read(\"./inputs/queens_n_queens.shp\")\n \n# Create a colour column that allows us to differential between female and male.\nshapefile$color <- fifelse(shapefile$ROAD_NAME_ %ilike% royal_female, \"red\", \"blue\")\n# And gender\nshapefile$gender <- fifelse(shapefile$ROAD_NAME_ %ilike% royal_female, \"Female\", \"Male\")\n\n# Coerce to a data.table.\ndt <- data.table(shapefile)\n\n# Inspect frequencies.\ndt[, .N, ROAD_NAME_][order(-N)]\n\n\n# Create a leaflet map.\n    # - We'll use a minimilist base map.\n    # - Add the polylines from the shapefile and allow for street name popups.\n    # - Add coloured lines.\nmap <-  leaflet() %>%\n    addProviderTiles(providers$CartoDB.Positron) %>%\n    addPolylines(\n        data = shapefile,\n        color = ~color,\n        weight = 3,\n        popup = ~ROAD_NAME_\n    ) %>%\n    addLegend(\n        colors = c(\"red\", \"blue\"),\n        labels = c(\"Female names\", \"Male names\"),\n        position = \"bottomright\"\n    )\n```\n\n```{r}\n# Display the map.\nmap\n```\n\nWe can zoom in to the CBD to highlight what I was talking about earlier.\n```{r}\nmap %>%\n  setView(lng = \"153.0255184\", lat = \"-27.4687535\", zoom = 15)\n```\n\n\nWe can also calculate the lengths of each of the streets ...\n\n```{r}\ndt[, street_length := st_length(shapefile)]\ndt\n\n# Calculate cumulative length by gender.\ngen <- dt[, .(cumulative_length = sum(street_length)), by = gender]\n\n# Plot the cumulative lengths for both genders\nplot_ly(gen, x = ~gender, y = ~cumulative_length, type = 'bar', marker = list(color = c(\"pink\", \"blue\"))) %>%\n  layout(title = \"Sum of Males and Females\",\n         xaxis = list(title = \"Gender\"),\n         yaxis = list(title = \"Count\"))\n```\n","srcMarkdownNoYaml":"\n\nHave you ever noticed the prevelance of Royal street names within Australia?\n\nLiving in Brisbane CBD, it's certainly quite known that female Royal street names run in one direction and males the other.\n\nWe can quite easily observe the commonality of this accross brisbane ...\n\n\n<details><summary>Project setup</summary>\n```{r}\n#| warning: false\n#| output: false\n\n# install.packages(\"sf\")\n# install.packages(\"rmapshaper\")\n# install.packages(\"leaflet\")\n# install.packages(\"rgeos\")\n# install.packages(\"plotly\")\n\n# Restore our r environment.\nrenv::restore(prompt = F)\n\n# Load required packages.\nlibrary(sf)             # For reading Shape files.\nlibrary(rgeos)          # For reducing Shape files.\nlibrary(leaflet)        # Plotting Shape files.\nlibrary(data.table)     # For data.tables.\nlibrary(plotly)         # For plotsY.\n\n# Define a regex pattern of word-bounded Royal female and males names.\nroyal_female <- \"\\\\b(Adelaide|Cordelia|countess|Cordeilla|Ann|Queen|Victoria|Mary|Louise|Alexandra|Elizabeth|Alice|Margaret|Charlotte|Augusta|Helena|Maud|Agnes|Helene|Caroline|Olga|Louisa|Diana)\\\\b\"\nroyal_male <- \"\\\\b(Albert|George|Charles|Edward|earl|Christian|Frederick|Louis|Arthur|William|Henry|Alexander|John|Philip|Douglas|Ernest|Patrick|Friederike|Auguste|Francis|David|Augustus|Antony)\\\\b\"\n```\n</details>\n\n<details>\n\n```{r}\nif(F){\n    # Read the shapefile\n    shapefile <- st_read(\"C:\\\\temp\\\\QSC_Extracted_Data\\\\QSC_Extracted_Data_20240418_144922083000-53700\\\\Queensland_roads_and_tracks.shp\")\n\n\n    # We're only interested in Brisbane City and of the below road class types.\n    shapefile <- shapefile[\n        shapefile$LGA_NAME_R == \"Brisbane City\"\n    , ]\n    shapefile <- shapefile[shapefile$ROAD_NAME_ %ilike% royal_female | shapefile$ROAD_NAME_ %ilike% royal_male, ]\n\n    dt <- data.table(shapefile)\n\n    View(dt[, .N, ROAD_NAME_][order(-N)])\n\n\n    remove <- \"Saint Helena|Mary Ellen| HOLT |CHRISTIAN COL|M MAC|OUTREACH|E ANNE L|FARRIOR|WILLIAM FAR| LESLIE |TONGE|JOHN FRAN|JOHN FINN|SAINT GEOR|JOHN FISH| GOD |SAINT|BISHOP|JOHN BRI|ISLEY| ULM |ARTHUR GO|SIR DA|GASKIN|SIRETT|JOLLY|COOKMAN|E PAGE\"\n\n    shapefile <- shapefile[!shapefile$ROAD_NAME_ %ilike% remove, ]\n\n    dt <- data.table(shapefile)\n\n    View(dt[, .N, ROAD_NAME_][order(-N)])\n\n\n    st_write(shapefile, \"./inputs/queens_n_queens.shp\")\n\n    head(shapefile)\n    }\n```\n</details>\n\n```{r}\n#| warning: false\n#| output: false\n\n# Define the input path to our shapefile.\nshapefile <- st_read(\"./inputs/queens_n_queens.shp\")\n \n# Create a colour column that allows us to differential between female and male.\nshapefile$color <- fifelse(shapefile$ROAD_NAME_ %ilike% royal_female, \"red\", \"blue\")\n# And gender\nshapefile$gender <- fifelse(shapefile$ROAD_NAME_ %ilike% royal_female, \"Female\", \"Male\")\n\n# Coerce to a data.table.\ndt <- data.table(shapefile)\n\n# Inspect frequencies.\ndt[, .N, ROAD_NAME_][order(-N)]\n\n\n# Create a leaflet map.\n    # - We'll use a minimilist base map.\n    # - Add the polylines from the shapefile and allow for street name popups.\n    # - Add coloured lines.\nmap <-  leaflet() %>%\n    addProviderTiles(providers$CartoDB.Positron) %>%\n    addPolylines(\n        data = shapefile,\n        color = ~color,\n        weight = 3,\n        popup = ~ROAD_NAME_\n    ) %>%\n    addLegend(\n        colors = c(\"red\", \"blue\"),\n        labels = c(\"Female names\", \"Male names\"),\n        position = \"bottomright\"\n    )\n```\n\n```{r}\n# Display the map.\nmap\n```\n\nWe can zoom in to the CBD to highlight what I was talking about earlier.\n```{r}\nmap %>%\n  setView(lng = \"153.0255184\", lat = \"-27.4687535\", zoom = 15)\n```\n\n\nWe can also calculate the lengths of each of the streets ...\n\n```{r}\ndt[, street_length := st_length(shapefile)]\ndt\n\n# Calculate cumulative length by gender.\ngen <- dt[, .(cumulative_length = sum(street_length)), by = gender]\n\n# Plot the cumulative lengths for both genders\nplot_ly(gen, x = ~gender, y = ~cumulative_length, type = 'bar', marker = list(color = c(\"pink\", \"blue\"))) %>%\n  layout(title = \"Sum of Males and Females\",\n         xaxis = list(title = \"Gender\"),\n         yaxis = list(title = \"Count\"))\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"blah.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.553","theme":"cosmo","title":"Royal Street Names in Brisbane City"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}