[{"name":"app.R","content":"# Install and load the required libraries\r\ninstall.packages(c(\"shiny\", \"plotly\"))\r\nlibrary(shiny)\r\nlibrary(plotly)\r\n\r\n# UI definition\r\nui <- fluidPage(\r\n  titlePanel(\"Interactive Waterfall Chart\"),\r\n  sidebarLayout(\r\n    sidebarPanel(\r\n      sliderInput(\"starting_point\", \"Starting Point:\", min = -20, max = 20, value = 0),\r\n      sliderInput(\"category1_value\", \"Category 1 Value:\", min = -20, max = 20, value = 10),\r\n      sliderInput(\"category2_value\", \"Category 2 Value:\", min = -20, max = 20, value = -5),\r\n      sliderInput(\"category3_value\", \"Category 3 Value:\", min = -20, max = 20, value = 8)\r\n    ),\r\n    mainPanel(\r\n      plotlyOutput(\"waterfall_chart\")\r\n    )\r\n  )\r\n)\r\n\r\n# Server logic\r\nserver <- function(input, output) {\r\n  output$waterfall_chart <- renderPlotly({\r\n    # Sample data for the waterfall chart\r\n    data <- data.frame(\r\n      Category = c(\"Starting Point\", \"Category 1\", \"Category 2\", \"Category 3\", \"Ending Point\"),\r\n      Value = c(input$starting_point, input$category1_value, input$category2_value, input$category3_value, 0)\r\n    )\r\n\r\n    # Calculate the cumulative values for the waterfall chart\r\n    data$Cumulative <- cumsum(data$Value)\r\n\r\n    # Create the waterfall chart using plot_ly with custom colors\r\n    waterfall_chart <- plot_ly(\r\n      type = \"waterfall\",\r\n      x = data$Category,\r\n      y = data$Value,\r\n      text = paste(\"Value: \", data$Value),\r\n      connector = list(mode = \"between\", line = list(color = \"rgb(63, 63, 63)\")),\r\n      increasing = list(marker = list(color = \"rgba(0, 150, 0, 0.8)\")),  # Dark green\r\n      decreasing = list(marker = list(color = \"rgba(200, 0, 0, 0.8)\")),   # Dark red\r\n      totals = list(marker = list(color = \"rgba(100, 149, 237, 0.8)\", line = list(color = \"rgb(63, 63, 63)\")))\r\n    )\r\n\r\n    # Return the chart\r\n    waterfall_chart\r\n  })\r\n}\r\n\r\n# Run the Shiny app\r\nshinyApp(ui, server)\r\n\r\n\r\n","type":"text"}]
